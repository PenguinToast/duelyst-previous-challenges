!function e(t,n,l){function i(a,d){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!d&&s)return s(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var r=n[a]={exports:{}};t[a][0].call(r.exports,function(e){var n=t[a][1][e];return i(n?n:e)},r,r.exports,e,t,n,l)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<l.length;a++)i(l[a]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={cssPath:"https://penguintoast.github.io/duelyst-previous-challenges/dist/duelyst-previous-challenges.css"}},{}],2:[function(e,t,n){!function(e){"use strict";function l(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function i(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var l=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-l);var i=(t-n)/6048e5;return 1+Math.floor(i)}function o(e){var t=e.getDay();return 0===t&&(t=7),t}function a(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}var d=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g;return function(s,u,r,f){if(1!==arguments.length||"string"!==a(s)||/\d/.test(s)||(u=s,s=void 0),s=s||new Date,s instanceof Date||(s=new Date(s)),isNaN(s))throw TypeError("Invalid date");u=String(d.masks[u]||u||d.masks["default"]);var c=u.slice(0,4);"UTC:"!==c&&"GMT:"!==c||(u=u.slice(4),r=!0,"GMT:"===c&&(f=!0));var y=r?"getUTC":"get",p=s[y+"Date"](),h=s[y+"Day"](),g=s[y+"Month"](),m=s[y+"FullYear"](),w=s[y+"Hours"](),_=s[y+"Minutes"](),b=s[y+"Seconds"](),v=s[y+"Milliseconds"](),M=r?0:s.getTimezoneOffset(),T=i(s),D=o(s),C={d:p,dd:l(p),ddd:d.i18n.dayNames[h],dddd:d.i18n.dayNames[h+7],m:g+1,mm:l(g+1),mmm:d.i18n.monthNames[g],mmmm:d.i18n.monthNames[g+12],yy:String(m).slice(2),yyyy:m,h:w%12||12,hh:l(w%12||12),H:w,HH:l(w),M:_,MM:l(_),s:b,ss:l(b),l:l(v,3),L:l(Math.round(v/10)),t:w<12?"a":"p",tt:w<12?"am":"pm",T:w<12?"A":"P",TT:w<12?"AM":"PM",Z:f?"GMT":r?"UTC":(String(s).match(t)||[""]).pop().replace(n,""),o:(M>0?"-":"+")+l(100*Math.floor(Math.abs(M)/60)+Math.abs(M)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10],W:T,N:D};return u.replace(e,function(e){return e in C?C[e]:e.slice(1,e.length-1)})}}();d.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},d.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},"function"==typeof define&&define.amd?define(function(){return d}):"object"==typeof n?t.exports=d:e.dateFormat=d}(this)},{}],3:[function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function i(){var e=document.createElement("link");e.rel="stylesheet",e.href=a["default"].cssPath,document.getElementsByTagName("head")[0].appendChild(e)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var o=e("pt-constants"),a=l(o)},{"pt-constants":1}],4:[function(e,t,n){(function(t){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i="undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,o=l(i),a=e("./challenge-view.tpl"),d=l(a);n["default"]=o["default"].Marionette.ItemView.extend({template:d["default"],className:"pt-daily-challenge",events:{click:"select"},onShow:function(){var e=this.model;e.listenTo(e,"deselected",this.deselect.bind(this))},select:function(){var e=this.model;e.trigger("selected",e),this.$el.addClass("selected")},deselect:function(){this.$el.removeClass("selected")}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./challenge-view.tpl":5}],5:[function(require,module,exports){(function(global){var _="undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+=""+(null==(__t=id)?"":__t)+" - "+(null==(__t=attributes.title)?"":__t)+"\n";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(t){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i="undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,o=l(i),a=e("./util"),d=l(a);n["default"]=o["default"].Model.extend({initialize:function(e,t){var n=t.snapshot,l=n.val();l.challenge_id=d["default"].dailyChallengeId,this.set({attributes:l,id:n.key()})},date:function(){return new Date(this.get("id"))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":12}],7:[function(e,t,n){(function(t){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i="undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,o=l(i),a="undefined"!=typeof window?window.NavigationManager:"undefined"!=typeof t?t.NavigationManager:null,d=l(a),s="undefined"!=typeof window?window.EventBus:"undefined"!=typeof t?t.EventBus:null,u=l(s),r="undefined"!=typeof window?window.SDK:"undefined"!=typeof t?t.SDK:null,f=l(r),c=e("./challenge-view"),y=l(c),p=e("./challenges-view.tpl"),h=l(p);n["default"]=o["default"].Marionette.CompositeView.extend({id:"pt-challenges-dialog",className:"modal prompt-modal",template:h["default"],childView:y["default"],childViewContainer:".pt-daily-challenges",events:{"click .cancel-dialog":"onCancel","click .confirm-dialog":"onConfirm"},onShow:function(){this.$el.find(".confirm-dialog").prop("disabled",!0);var e=d["default"].getInstance();this.listenToOnce(e,"user_attempt_cancel",this.onCancel),this.listenToOnce(e,"user_attempt_skip",this.onConfirm),this.listenToOnce(e,"user_attempt_confirm",this.onConfirm),this.selectedModel=null,this.listenTo(this.collection,"selected",this.selectModel),this.$childViewContainer.scroll(this.onScroll.bind(this))},selectModel:function(e){this.selectedModel?this.selectedModel.trigger("deselected"):this.$el.find(".confirm-dialog").prop("disabled",!1),this.selectedModel=e},onCancel:function(){var e=d["default"].getInstance();e.destroyDialogView()},onConfirm:function(){var e=u["default"].getInstance();window.challenge=this.selectedModel.get("attributes"),f["default"].ChallengeRemote.loadAndCreateFromModelData(this.selectedModel.get("attributes")).then(function(t){e.trigger("start_challenge",t)})},onScroll:function(){var e=this.$childViewContainer;e[0].scrollHeight-e.scrollTop()===e.innerHeight()&&this.collection.fetch()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./challenge-view":4,"./challenges-view.tpl":8}],8:[function(require,module,exports){(function(global){var _="undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-dialog">\n  <button\n    type="button"\n    class="btn btn-clean btn-user-cancel btn-cancel-primary cancel-dialog"\n  />\n  <div class="modal-content">\n    <div class="modal-header">\n      <h4 class="modal-title">\n        Select a date:\n      </h4>\n    </div>\n    <div class="modal-body clearfix">\n      <div class="pt-daily-challenges" />\n    </div>\n    <div class="modal-footer">\n      <div class="btn-group btn-group-centered">\n        <button class="btn btn-clean btn-clean-primary cancel-dialog">\n          CANCEL\n        </button>\n        <button class="btn btn-clean btn-clean-primary confirm-dialog">\n          PLAY\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){(function(t){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i="undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,o=l(i),a="undefined"!=typeof window?window.Firebase:"undefined"!=typeof t?t.Firebase:null,d=l(a),s=e("./challenge"),u=l(s),r=e("./util"),f=l(r),c="https://duelyst-production.firebaseio.com/daily-challenges",y=6;n["default"]=o["default"].Collection.extend({model:u["default"],comparator:function(e){return-e.date()},initialize:function(){this.firebase=new d["default"](c),this.lastFetchedDate=new Date,this.lastFetchedDate.setUTCHours(0,0,0,0),this.fetch()},fetch:function(){var e=this;if(this.lastFetchedDate){var t=this.lastFetchedDate,n=f["default"].formatDate(t),l=0;this.lastFetchedDate=null,this.firebase.orderByKey().endAt(n).limitToLast(y).on("child_added",function(n){var i=new u["default"](null,{snapshot:n});e.add(i),l+=1,l===y&&(t.setUTCDate(t.getUTCDate()-y),e.lastFetchedDate=t)})}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./challenge":6,"./util":12}],10:[function(e,t,n){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var l="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,i=n(l),o="undefined"!=typeof window?window.NavigationManager:"undefined"!=typeof t?t.NavigationManager:null,a=n(o),d=e("./challenges"),s=n(d),u=e("./challenges-view"),r=n(u),f=e("./util"),c=n(f),y=e("./previous-challenges-button.tpl"),p=n(y),h=e("./attach-stylesheet"),g=n(h);(0,i["default"])(function(){var e=a["default"].getInstance();(0,g["default"])(),e.listenTo(e._modalRegion,"show",function(t){c["default"].isQuestModal(t)&&t.on("animated",function(){t._dailyChallengeModel&&(c["default"].dailyChallengeId=t._dailyChallengeModel.get("challenge_id"),(0,i["default"])(".daily-challenge .quest-content").append((0,p["default"])()),(0,i["default"])(".pt-show-previous-challenges").click(function(){var t=new r["default"]({collection:new s["default"]});e.showDialogView(t)}))})})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./attach-stylesheet":3,"./challenges":9,"./challenges-view":7,"./previous-challenges-button.tpl":11,"./util":12}],11:[function(require,module,exports){(function(global){var _="undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button class="btn btn-clean btn-clean-secondary pt-show-previous-challenges">\n  Previous\n</button>\n';return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("dateformat"),o=l(i),a={isQuestModal:function(e){return"quest-log"===e.el.id},formatDate:function(e){return(0,o["default"])(e,"UTC:yyyy-mm-dd")}};n["default"]=a},{dateformat:2}]},{},[10]);